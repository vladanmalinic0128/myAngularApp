<div class="card flex justify-content-center align-items-center h-full">
  <form [formGroup]="registerForm" (ngSubmit)="submitDetails()">
    <p-card header="Registration form" [style]="{maxWidth: '600px'}">

      <div [ngClass]="{'flex': this.wrapForm, 'gap-3': this.wrapForm, 'justify-content-between': this.wrapForm}">
        <div [ngClass]="{'flex': this.wrapForm, 'flex-column': this.wrapForm}">
          <div class="field">
            <label for="firstname">First name</label>
            <input type="text" pInputText formControlName="firstname" class="w-full" name="firstname" id="firstname"
                   placeholder="Enter your firstname"/>
            <small *ngIf="firstname.invalid && firstname.touched" class="block p-error">
              <div *ngIf="firstname.errors?.['required']">First name is required</div>
            </small>

            <small *ngIf="lastname.invalid && lastname.touched" class="block p-error">
              <div *ngIf="lastname.errors?.['required']">&nbsp;</div>
            </small>
          </div>

          <div class="field">
            <label for="username">Username</label>
            <input type="text" pInputText formControlName="username" class="w-full" name="username" id="username"
                   placeholder="Enter your username"/>
            <small *ngIf="username.invalid && username.touched" class="block p-error">
              <div *ngIf="username.errors?.['required']">Username is required</div>
              <div *ngIf="username.errors?.['existsByUser']">Username already in use</div>
            </small>

            <small *ngIf="email.invalid && email.touched" class="block p-error">
              <div *ngIf="email.errors?.['required']">&nbsp;</div>
              <div *ngIf="email.errors?.['email']">&nbsp;</div>
              <div *ngIf="email.errors?.['existsByEmail']">&nbsp;</div>
            </small>

          </div>

          <div class="field">
            <label for="password">Password</label>
            <input type="password" pInputText formControlName="password" class="w-full" name="password" id="password"
                   placeholder="Enter your password"/>
            <small *ngIf="password.invalid && password.touched" class="block p-error">
              <div *ngIf="password.errors?.['required']">Password is required</div>
              <div *ngIf="confirmedPassword.errors?.['pattern']">Invalid password</div>
            </small>

            <small *ngIf="confirmedPassword.invalid && confirmedPassword.touched" class="block p-error">
              <div *ngIf="confirmedPassword.errors?.['required']">&nbsp;</div>
              <div *ngIf="confirmedPassword.errors?.['pattern']">&nbsp;</div>
            </small>
          </div>
        </div>

        <div [ngClass]="{'flex': this.wrapForm, 'flex-column': this.wrapForm}">
          <div class="field">
            <label for="lastname">Last name</label>
            <input type="text" pInputText formControlName="lastname" class="w-full" name="lastname" id="lastname"
                   placeholder="Enter your lastname"/>
            <small *ngIf="lastname.invalid && lastname.touched" class="block p-error">
              <div *ngIf="lastname.errors?.['required']">Last name is required</div>
            </small>

            <small *ngIf="firstname.invalid && firstname.touched" class="block p-error">
              <div *ngIf="firstname.errors?.['required']">&nbsp;</div>
            </small>
          </div>

          <div class="field">
            <label for="email">Email</label>
            <input type="text" pInputText formControlName="email" class="w-full" name="email" id="email"
                   placeholder="Enter your email"/>
            <small *ngIf="email.invalid && email.touched" class="block p-error">
              <div *ngIf="email.errors?.['required']">Email is required</div>
              <div *ngIf="email.errors?.['email']">Invalid email</div>
              <div *ngIf="email.errors?.['existsByEmail']">Email already in use</div>
            </small>

            <small *ngIf="username.invalid && username.touched" class="block p-error">
              <div *ngIf="username.errors?.['required']">&nbsp;</div>
              <div *ngIf="username.errors?.['existsByUser']">&nbsp;</div>
            </small>
          </div>

          <div class="field">
            <label for="confirmedPassword">Password</label>
            <input type="password" pInputText formControlName="confirmedPassword" class="w-full" name="confirmedPassword"
                   id="confirmedPassword"
                   placeholder="Confirm your password"/>
            <small *ngIf="confirmedPassword.invalid && confirmedPassword.touched" class="block p-error">
              <div *ngIf="confirmedPassword.errors?.['required']">Confirmed password is required</div>
              <div *ngIf="confirmedPassword.errors?.['pattern']">Invalid password</div>
            </small>

            <small *ngIf="password.invalid && password.touched" class="block p-error">
              <div *ngIf="password.errors?.['required']">&nbsp;</div>
              <div *ngIf="confirmedPassword.errors?.['pattern']">&nbsp;</div>
            </small>
          </div>
        </div>
      </div>

      <div class="field">
        <label for="selectedCity">City</label>
        <p-dropdown formControlName="selectedCity" [options]="cities" optionLabel="name" placeholder="Select a City"
                    name="selectedCity" id="selectedCity" styleClass="w-full" [(ngModel)]="chosenCity"></p-dropdown>
        <small *ngIf="selectedCity.invalid && selectedCity.touched" class="block p-error">
          <div *ngIf="selectedCity.errors?.['required']">City is required</div>
        </small>
      </div>

      <div [ngClass]="{'flex': this.wrapForm, 'gap-3': this.wrapForm, 'justify-content-center': this.wrapForm}">
        <div class="field w-full">
          <label>Avatar (optonal)</label>
          <p-fileUpload mode="basic" chooseLabel="Choose an avatar" name="demo[]" accept="image/*"
                        (onSelect)="onFileSelected($event)" name="avatar" id="avatar" styleClass="w-full"></p-fileUpload>
        </div>

        <p-image class="w-full mb-2" *ngIf="this.image.length > 1" [src]="this.image" alt="Image" width="250" [preview]="true"></p-image>
      </div>

      <p-button type="submit" label="Sign up" styleClass="w-full" [disabled]="registerForm.invalid"></p-button>
      <small *ngIf="registerForm.errors?.['passwordMismatch'] && confirmedPassword.valid && password.valid" class="block p-error">
        Password should match
      </small>

      <div class="flex flex-column align-items-center mt-2 w-full">
        <a routerLink="/home" class="custom-link">Back to home page</a>
      </div>
    </p-card>
  </form>
</div>


